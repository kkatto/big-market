# 大营销平台 - 积分返利抽奖服务

## 主要技术栈
SpringBoot、MyBatis、MySQL、Redis、Dubbo、RabbitMQ、ElasticSearch
## 项目描述
Raffle 抽奖模块主要以支撑各类差异化抽奖流程，如通用抽奖、黑名单、抽奖N次解锁奖品等各类玩法的支持。在此系统模块的设计中运用到了模板模式、工厂模式等，解决代码的可扩展性。
## 核心职责
1. 设计出抽奖的领域模型功能，以及在抽奖的流程抽象上，分为抽奖前、抽奖中、抽奖后的节点上扩展各项行为动作。如抽奖前的人群判断、抽奖中库存扣减、抽奖后兜底奖励等。
2. 抽奖是一种峰值流量高的业务场景，因此在设计奖品库存扣减上，采用了 Redis decr 分段消费和加锁兜底的设计，同时对于消费成功的库存，异步队列方式 + 定时任务更新库存。这样可以不超卖的同时，又减少数据库的压力。
3. 项目采用分布式架构设计，Dubbo 提供 RPC 接口，Nacos 作为注册中心。分库分表数据通过 canal 同步 binlog 日志到 ElasticSearch 进行聚合查询。通过 RabbitMQ 解耦系统流程，包括抽奖发奖流程、异步行为返利等。
